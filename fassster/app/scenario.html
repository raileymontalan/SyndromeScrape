  <div class="modal-header bg-success">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <h4 class="modal-title" id="myModalLabel">Editing Scenario: { title }</h4>
  </div>
  <div class="modal-body">
    <div class="">
      <div class="col-md-12">
        <div class="input-group input-group-wide">
          <span class="input-group-addon wide">Scenario Title</span>
          <input type="text" step="any" name="scenarioTitle" class="form-control" aria-describedby="basic-addon1" value="{ title }" required />
        </div>
      </div>
      <div class="col-md-12">
        <div class="input-group input-group-wide">
          <span class="input-group-addon wide">Scenario Title</span>
          <textarea name="scenarioDesc" class="form-control" aria-describedby="basic-addon1" rows="5">{! description }</textarea>
        </div>
      </div>
    </div>
    <div class="row" >
      <div class="col-md-4">
        <h4>Parameters</h4>
      </div>
      <div class="col-md-8">
        <h4>Decorators</h4>
      </div>
      <div class="scenario">
        <!-- EDIT SCENARIO FORM -->
        <form id="edit{ sid }" class="form" action="/edit" method="POST">
          <input type="hidden" name="projectID" value="{ pid }">
          <input type="hidden" name="scenarioID" value="{ sid }">
          <div class="body">
            <div class="content">
              <div class="col-md-4" >
                <div class=" col-md-4" id="parameters">

                  <div class="input-group">
                    <span class="input-group-addon wide">{ prtitle }</span>
                    <input type="number" step="any" name="incubation" class="form-control" aria-describedby="basic-addon1" value="{ prvalue }">
                  </div>
                  
                </div>
              </div>
              <div role="" class="col-md-8" id="parameters{ sid }">
                <div class="col-md-12">
                <div class="input-group pull-left">
                  <input id="myDecoFilter" type="text" class="form-control" placeholder="Go to decorator..." onkeyup="gotoDecorators()">
                  <span class="input-group-btn">
                    <button class="btn btn-default" style="margin-top:0;" type="button">Go!</button>
                  </span>
                </div>
                </div>
                <div class="clearfix"></div>
                <div id="scenarioDecorators" style="max-height:200px; overflow:hidden; overflow-y:scroll;">

                  <div class="scendeco col-md-6">
                    <div class="input-group">
                      <span class="input-group-addon wide">{ dtitle }</span>
                      <input type="number" step="any" name="{ dtitle }" class="form-control" aria-describedby="basic-addon1" value="{ dvalue }">
                    </div>
                  </div>
                  
                </div>
              </div>
            </div>
          </div>
        </form>
        <!-- END OF FORM -->
      </div>
    </div>
    <div class="clearfix"></div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
    <button form="edit{ sid }" type="submit" class="btn btn-success">Save changes</button>
  </div>

  <script type="text/javascript">
		$(document).ready(function() {
      var pid = $('#pid').text();
      var sid = $('#sid').text();

        var body = [];
        cScenario = [];
        cDecos = [];
        cParas = [];
        //var promise = $.post("http://fassster.ehealth.ph/web_api/emr",
        var promise = $.post("http://www.romeljohnsantos.com/api/projects.php?pid="+pid+"&sid="+sid,
        body, function(data) {
                if(data) {
                  cScenario = {
                    pid : data.pid,
                    author : data.author,
                    date : data.date,
                    title : data.title,
                    sid : data.scenario.sid,
                    stitle : data.scenario.title,
                    sdate : data.scenario.date,
                    description : data.scenario.description,
                    sauthor : data.scenario.author
                  }
                  $.each(data.scenario.decorators, function(i, item) {
                    cDecos.push({
                        did: i,
                        dtitle: item.title,
                        dvalue: item.value
                    });
                  });
                  $.each(data.scenario.parameters, function(i, item) {
                    cParas.push({
                        prid: i,
                        prtitle: item.title,
                        prvalue: item.value
                    });
                  });
                }
            }, "json");

            promise.done(function() {
              console.log(cScenario);
              console.log(cDecos);
              console.log(cParas);
              //display data using template plugin
              $('#stemModal').template(cScenario);
              $('#parameters').template(cParas);
              $('#scenarioDecorators').template(cDecos);
          });
    });
    
    $( document ).ajaxStop(function() {
      alert("STOP");
    });
</script>