<div class="modal fade" id="stemModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	<div class="modal-dialog modal-lg" role="document" id="scenarioPage">
		<div class="modal-content" data-template="data-template">
			<div class="modal-header bg-success">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="myModalLabel">Edit Scenario</h4>
			</div>
			<div class="modal-body">
				<div id="scenarioBody">
					<div class="col-md-6">
						<div class="input-group input-group-wide">
							<span class="input-group-addon wide">Scenario Title</span>
							<input type="text" step="any" name="scenarioTitle" class="form-control" aria-describedby="basic-addon1" value="{{ scenario.title }}" required />
						</div>
					</div>
					<div class="col-md-6">
						<div class="input-group input-group-wide">
							<span class="input-group-addon wide">Scenario Author</span>
							<input type="text" step="any" name="scenarioAuthor" class="form-control" aria-describedby="basic-addon1" value="{{ scenario.author }}" readonly />
						</div>
					</div>
					<div class="col-md-12">
						<div class="input-group input-group-wide">
							<span class="input-group-addon wide">Description</span>
							<textarea name="scenarioDesc" class="form-control" aria-describedby="basic-addon1" rows="5">{{ scenario.description }}</textarea>
						</div>
					</div>
				</div>
				
				<div class="row" >
					<div class="col-md-4">
						<h4>Parameters</h4>
					</div>
					<div class="col-md-8">
						<h4>Decorators</h4>
					</div>

					<div class="scenario">
						<!-- EDIT SCENARIO FORM -->
						<form id="edit" class="form" action="/updateScenario" method="POST">
							<div id="inputHidden">
								<input type="hidden" name="projectID" value="{{ pid }}">
								<input type="hidden" name="scenarioID" value="{{ scenario.sid }}">
							</div>
							<div class="body">
								<div class="content">
									<div class="col-md-4" >
										<div class=" col-md-4" id="parameters">
						
											<div class="input-group" data-template-for="scenario.parameters">
												<span class="input-group-addon wide">{{ title }}</span>
												<input type="number" step="any" name="{{ title }}" class="form-control" aria-describedby="basic-addon1" value="{{ value }}">
											</div>
										
										</div>
									</div>

									<div role="" class="col-md-8">
										<div class="col-md-12">
											<div class="input-group pull-left input-group-wide">
												<input id="myDecoFilter" type="text" class="form-control" placeholder="Enter fullname of Decorator to find." onkeyup="gotoDecorators()">
												<span class="input-group-addon" id="sizing-addon1"><i class="fa fa-search"></i></span>

											</div>
										</div>
										<div class="clearfix"></div>
										<div id="scenarioDecorators" style="max-height:200px; overflow:hidden; overflow-y:scroll;">
						
											<div class="scendeco col-md-6" id="{{ title }}"  data-template-for="scenario.decorators">
												<div class="input-group">
													<span class="input-group-addon wide">{{ title }}</span>
													<input type="number" step="any" name="{{ title }}" class="form-control" aria-describedby="basic-addon1" value="{{ value }}">
												</div>
											</div>
										
										</div>
									</div>
								</div>
							</div>
						</form>
						<!-- END OF FORM -->
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				<button form="edit{{ sid }}" type="submit" class="btn btn-success">Save changes</button>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	$(document).ready(function() {
		var sp = Tempo.prepare("scenarioPage");
		
		$("#stemModal").on("shown.bs.modal", function(e) {
			//$(this).find(".modal-content").html("");
			//$(this).find(".modal-content").attr("style", "");
			var link = $(e.relatedTarget);
			var pid = link.attr("data-pid");
			var sid = link.attr("data-sid");
			//$(this).find(".modal-content").load(link.attr("data-page"));
			var body = [];
			cScenario = [];
			cDecorators = [];
			cParameters = [];
			//var promise = $.post("http://fassster.ehealth.ph/web_api/emr",
			var promise = $.post("http://www.romeljohnsantos.com/api/projects.php?pid="+pid+"&sid="+sid,
			body, function(data) {
					if(data) {
						cScenario = data;
					}
			}, "json");

			promise.done(function() {
				console.log(cScenario);
				//display data using template plugin
				sp.into('scenarioPage').render(cScenario);
				
			});
		});

		$("#stemModal").on("hidden.bs.modal", function(e) {
			Tempo.prepare("scenarioPage").clear();
		});
	});
</script>